(()=>{"use strict";let e=[];const t=e=>({name:e}),o=t("Inbox");e.push(o);let l=[];const a=()=>{const e=document.querySelector("#project-bg-modal");e.classList.remove("show"),e.classList.add("hide")},s=()=>{const e=document.querySelector("#task-bg-modal");e.classList.remove("show"),e.classList.add("hide")},n=()=>{const t=document.querySelector("#project-div");for(;t.firstChild;)t.removeChild(t.firstChild);e=null===localStorage.getItem("projects")?[]:JSON.parse(localStorage.getItem("projects"));for(let o=0;o<e.length;o++){let l=document.createElement("div");l.classList.add("projects"),t.appendChild(l);let a=document.createElement("div"),s=document.createElement("button"),n=document.createElement("h3");n.textContent=e[o].name,s.textContent="X",s.classList.add("remove-project"),a.appendChild(n),l.appendChild(a),l.appendChild(s),"Inbox"===e[o].name&&l.removeChild(s)}document.querySelectorAll(".remove-project").forEach((e=>{e.addEventListener("click",(t=>{t.stopPropagation();let o=e.parentElement.firstChild.textContent;console.log(o),r(o),n(),c("Inbox")}))})),document.querySelectorAll(".projects").forEach((e=>{e.addEventListener("click",(t=>{let o=e.firstChild.firstChild.textContent;c(o),t.stopPropagation()}))}))},c=t=>{e=null===localStorage.getItem("projects")?[]:JSON.parse(localStorage.getItem("projects")),l=null===localStorage.getItem("tasks")?[]:JSON.parse(localStorage.getItem("tasks")),document.querySelector("#page-heading").textContent=t;const o=document.querySelector("#task-div");for(;o.firstChild;)o.removeChild(o.firstChild);for(let e=0;e<l.length;e++)if(l[e].projectName===t){let t=document.createElement("div");t.classList.add("tasks"),!0===l[e].taskFinished?t.classList.add("finished"):t.classList.add("unfinished"),o.appendChild(t);let a=document.createElement("button"),s=document.createElement("button"),n=document.createElement("h3"),c=document.createElement("p"),r=document.createElement("p");a.textContent="Done",a.classList.add("task-fin"),s.textContent="X",s.classList.add("remove-task"),n.textContent=l[e].taskName,c.textContent=`Priority: ${l[e].taskPriority}`,r.textContent=`Due: ${l[e].taskDue}`,t.appendChild(a),t.appendChild(s),t.appendChild(n),t.appendChild(c),t.appendChild(r)}document.querySelectorAll(".remove-task").forEach((e=>{e.addEventListener("click",(t=>{t.stopPropagation();let o=e.parentElement.childNodes[2].textContent,l=document.querySelector("#page-heading").textContent;console.log(l),console.log(o),d(o,l),c(l)}))})),document.querySelectorAll(".task-fin").forEach((e=>{e.addEventListener("click",(t=>{t.stopPropagation();let o=e.parentElement.childNodes[2].textContent,l=document.querySelector("#page-heading").textContent,a=e.parentElement;console.log(o),console.log(l),i(o,l),console.log(a),a.classList.remove("unfinished"),a.classList.add("finished"),c(l)}))}))},r=t=>{e=null===localStorage.getItem("projects")?[]:JSON.parse(localStorage.getItem("projects")),l=null===localStorage.getItem("tasks")?[]:JSON.parse(localStorage.getItem("tasks")),l=l.filter((e=>e.projectName!==t));for(let o=0;o<e.length;o++)if(e[o].name===t){e.splice(o,1);break}localStorage.setItem("tasks",JSON.stringify(l)),localStorage.setItem("projects",JSON.stringify(e))},d=(e,t)=>{l=null===localStorage.getItem("tasks")?[]:JSON.parse(localStorage.getItem("tasks"));for(let o=0;o<l.length;o++)l[o].taskName===e&&l[o].projectName===t&&l.splice(o,1);localStorage.setItem("tasks",JSON.stringify(l))},i=(e,t)=>{l=null===localStorage.getItem("tasks")?[]:JSON.parse(localStorage.getItem("tasks"));for(let o=0;o<l.length;o++)l[o].taskName===e&&l[o].projectName===t&&(console.log(l[o]),l[o].taskFinished=!0,console.log(l[o].taskFinished));localStorage.setItem("tasks",JSON.stringify(l))};n(),c("Inbox"),document.querySelector("#add-project").addEventListener("click",(()=>{(()=>{const e=document.querySelector("#project-bg-modal");e.classList.remove("hide"),e.classList.add("show")})()})),document.querySelector("#close-project-form").addEventListener("click",(()=>{console.log("Clicked"),a()})),document.querySelector("#add-task").addEventListener("click",(()=>{(()=>{const e=document.querySelector("#task-bg-modal");e.classList.remove("hide"),e.classList.add("show")})()})),document.querySelector("#close-task-form").addEventListener("click",(()=>{s()})),document.querySelector("#project-submit").addEventListener("click",(o=>{o.stopPropagation(),(o=>{if(""===o)return void alert("Need to name your project :)");const l=t(o);e.push(l),localStorage.setItem("projects",JSON.stringify(e))})(document.querySelector("#project-name").value),a(),n()})),document.querySelector("#task-submit").addEventListener("click",(e=>{e.stopPropagation();const t=document.querySelector("#page-heading").textContent;let o,a=document.querySelector("#task-name").value;o=document.getElementById("task-high").checked?document.getElementById("task-high").value:document.getElementById("task-medium").checked?document.getElementById("task-medium").value:document.getElementById("task-low").value,((e,t,o,a)=>{const s=((e,t,o,l)=>({taskName:e,taskPriority:t,taskDue:o,taskFinished:!1,projectName:l}))(e,t,o,a);l.push(s),localStorage.setItem("tasks",JSON.stringify(l))})(a,o,document.querySelector("#task-due").value,t),s(),c(t)})),document.querySelector("#task-form").addEventListener("submit",(e=>{e.preventDefault()})),document.querySelector("#project-form").addEventListener("submit",(e=>{e.preventDefault()}))})();